const Rutube=function(){this.Player=function(e,t){if(!e)throw new Error("The Player element must be specified.");this.selector=e,this.config=t,this.duration=null,this.videoCurrentDuration=0,this.renderOnPage()},this.renderOnPage=function(){const e={id:"rt-"+this.selector,width:this.config.width||720,height:this.config.height||405,src:"//rutube.ru/play/embed/"+this.config.videoId,frameBorder:0,allow:"autoplay",allowFullScreen:"",webkitallowfullscreen:"",mozallowfullscreen:""},t=document.createElement("iframe");for(let n in e)t.setAttribute(n,e[n]);document.getElementById(this.selector).appendChild(t)},this.triggerEventObserver=function(e,t=null){if(this.config.events&&this.config.events[e])return this.config.events[e](t)},this.setPlayerState=function(e){const t={PLAYING:0,PAUSED:0,STOPPED:0,ENDED:0};for(let n in t)if(n.toLowerCase()===e.toLowerCase()){t[n]=1;break}return{playerState:t}},this.currentDuration=function(){return this.videoCurrentDuration};for(let[e,t]of Object.entries({play:"play",pause:"pause",stop:"stop",seekTo:"setCurrentTime",changeVideo:"changeVideo",mute:"mute",unMute:"unMute",setVolume:"setVolume"}))this[e]=function(e={}){document.getElementById(this.selector).contentWindow.postMessage(JSON.stringify({type:"player:"+t,data:e}),"*")};this.playerEvent=function(e){switch(e.type){case"player:durationChange":break;case"player:ready":this.triggerEventObserver("onReady",{videoId:e.data.videoId,clientId:e.data.clientId});break;case"player:changeState":case"player:playComplete":this.triggerEventObserver("onStateChange",this.setPlayerState(e.data.state||"ENDED"));break;case"player:currentTime":this.videoCurrentDuration=e.data.time}},window.addEventListener("message",function(e){if(/rutube/.test(e.origin)){const t=JSON.parse(e.data);this.playerEvent(t)}}.bind(this),0)};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=Rutube),exports.Rutube=Rutube);